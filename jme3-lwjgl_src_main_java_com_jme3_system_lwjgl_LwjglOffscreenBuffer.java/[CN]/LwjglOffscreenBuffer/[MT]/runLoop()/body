{
  if (!created.get()) {
    throw new IllegalStateException();
  }
  if (pbuffer.isBufferLost()) {
    pbuffer.destroy();
    try {
      pbuffer=new Pbuffer(width,height,pixelFormat,null);
      pbuffer.makeCurrent();
      renderer.invalidateState();
    }
 catch (    LWJGLException ex) {
      listener.handleError("Failed to restore pbuffer content",ex);
    }
  }
  listener.update();
  checkGLError();
  renderer.postFrame();
  GL11.glFlush();
  int frameRate=settings.getFrameRate();
  if (frameRate >= 1) {
    Display.sync(frameRate);
  }
}
