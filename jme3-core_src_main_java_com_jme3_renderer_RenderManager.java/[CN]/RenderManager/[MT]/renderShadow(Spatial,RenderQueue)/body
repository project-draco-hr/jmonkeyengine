{
  if (s instanceof Node) {
    Node n=(Node)s;
    List<Spatial> children=n.getChildren();
    for (int i=0; i < children.size(); i++) {
      renderShadow(children.get(i),rq);
    }
  }
 else   if (s instanceof Geometry) {
    Geometry gm=(Geometry)s;
    RenderQueue.ShadowMode shadowMode=s.getShadowMode();
    if (shadowMode != RenderQueue.ShadowMode.Off && shadowMode != RenderQueue.ShadowMode.Receive) {
      rq.addToShadowQueue(gm,RenderQueue.ShadowMode.Cast);
    }
  }
}
