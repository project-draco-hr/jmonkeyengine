{
  SceneUndoRedoManager undoRedo=Lookup.getDefault().lookup(SceneUndoRedoManager.class);
  if (undoRedo == null) {
    logger.log(Level.WARNING,"Cannot access SceneUndoRedoManager");
    return;
  }
  undoRedo.addEdit(this,new AbstractUndoableSceneEdit(){
    @Override public void sceneUndo(){
      logger.log(Level.FINE,"Do undo {0}",before);
      notifyListeners(PROP_USER_CHANGE,after,before);
      setSuperValue((T)before,false);
    }
    @Override public void sceneRedo(){
      logger.log(Level.FINE,"Do redo {0}",before);
      notifyListeners(PROP_USER_CHANGE,before,after);
      setSuperValue((T)after,false);
    }
    @Override public void awtUndo(){
    }
    @Override public void awtRedo(){
    }
  }
);
}
