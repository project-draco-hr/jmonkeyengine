{
  InputStream in=null;
  try {
    in=assetInfo.openStream();
    bitmap=BitmapFactory.decodeStream(in);
    if (bitmap == null) {
      throw new IOException("Failed to load image: " + assetInfo.getKey().getName());
    }
  }
  finally {
    if (in != null) {
      in.close();
    }
  }
switch (bitmap.getConfig()) {
case ALPHA_8:
    format=Image.Format.Alpha8;
  break;
case ARGB_8888:
format=Image.Format.RGBA8;
break;
case RGB_565:
format=Image.Format.RGB565;
break;
default :
format=null;
}
TextureKey texKey=(TextureKey)assetInfo.getKey();
if (texKey.isFlipY()) {
Matrix flipMat=new Matrix();
flipMat.preScale(1.0f,-1.0f);
Bitmap newBitmap=Bitmap.createBitmap(bitmap,0,0,bitmap.getWidth(),bitmap.getHeight(),flipMat,false);
bitmap.recycle();
bitmap=newBitmap;
if (bitmap == null) {
throw new IOException("Failed to flip image: " + texKey);
}
}
}
