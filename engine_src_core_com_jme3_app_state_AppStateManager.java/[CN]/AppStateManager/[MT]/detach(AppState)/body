{
synchronized (states) {
    if (states.contains(state)) {
      state.stateDetached(this);
      states.remove(state);
      return true;
    }
 else {
      return false;
    }
  }
}
