{
synchronized (states) {
    int num=states.size();
    for (int i=0; i < num; i++) {
      AppState state=states.get(i);
      if (stateClass.isAssignableFrom(state.getClass())) {
        return (T)state;
      }
    }
  }
  return null;
}
