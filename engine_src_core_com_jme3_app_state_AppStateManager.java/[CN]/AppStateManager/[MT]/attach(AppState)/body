{
synchronized (states) {
    if (!states.contains(state)) {
      state.stateAttached(this);
      states.add(state);
      return true;
    }
 else {
      return false;
    }
  }
}
