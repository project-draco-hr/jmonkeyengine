{
synchronized (states) {
    if (stateArray == null) {
      stateArray=states.toArray(new AppState[states.size()]);
    }
    return stateArray;
  }
}
