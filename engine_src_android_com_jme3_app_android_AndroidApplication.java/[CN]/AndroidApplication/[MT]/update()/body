{
  super.update();
  if (speed == 0 || paused) {
    return;
  }
  float tpf=timer.getTimePerFrame() * speed;
  secondCounter+=timer.getTimePerFrame();
  int fps=(int)timer.getFrameRate();
  if (secondCounter >= 5.0f) {
    textBuf.clear();
    textBuf.put("Frames per second: ");
    FastInteger.toCharArray(fps,fpsBuf);
    textBuf.put(fpsBuf);
    textBuf.flip();
    fpsText.setText(textBuf);
    secondCounter=0.0f;
  }
  stateManager.update(tpf);
  update(tpf);
  rootNode.updateLogicalState(tpf);
  guiNode.updateLogicalState(tpf);
  rootNode.updateGeometricState();
  guiNode.updateGeometricState();
  stateManager.render(renderManager);
  renderManager.render(tpf,context.isRenderable());
  render(renderManager);
  stateManager.postRender();
}
