{
  if (spatial == null) {
    return;
  }
  if (spatial instanceof Geometry) {
    Geometry geom=(Geometry)spatial;
    Mesh mesh=geom.getMesh();
    if (mesh instanceof Sphere) {
      collisionShape=new SphereCollisionShape(((Sphere)mesh).getRadius());
      return;
    }
 else     if (mesh instanceof Box) {
      collisionShape=new BoxCollisionShape(new Vector3f(((Box)mesh).getXExtent(),((Box)mesh).getYExtent(),((Box)mesh).getZExtent()));
      return;
    }
  }
  if (mass > 0) {
    Node parent=spatial.getParent();
    if (parent != null) {
      spatial.removeFromParent();
    }
    collisionShape=CollisionShapeFactory.createDynamicMeshShape(spatial);
    if (parent != null) {
      parent.attachChild(spatial);
    }
  }
 else {
    Node parent=spatial.getParent();
    if (parent != null) {
      spatial.removeFromParent();
    }
    collisionShape=CollisionShapeFactory.createMeshShape(spatial);
    if (parent != null) {
      parent.attachChild(spatial);
    }
  }
}
