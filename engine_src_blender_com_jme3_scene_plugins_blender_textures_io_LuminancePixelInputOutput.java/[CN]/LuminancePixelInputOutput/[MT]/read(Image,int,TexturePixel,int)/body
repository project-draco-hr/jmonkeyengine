{
  ByteBuffer data=image.getData(layer);
switch (image.getFormat()) {
case Luminance8:
    pixel.fromIntensity(data.get(index));
  break;
case Luminance8Alpha8:
pixel.fromIntensity(data.get(index));
pixel.setAlpha(data.get(index + 1));
break;
case Luminance16:
pixel.fromIntensity(data.getShort(index));
break;
case Luminance16Alpha16:
pixel.fromIntensity(data.getShort(index));
pixel.setAlpha(data.getShort(index + 2));
break;
case Luminance16F:
pixel.intensity=Float.intBitsToFloat(data.getShort(index));
break;
case Luminance16FAlpha16F:
pixel.intensity=Float.intBitsToFloat(data.getShort(index));
pixel.alpha=Float.intBitsToFloat(data.getShort(index + 2));
break;
case Luminance32F:
pixel.intensity=Float.intBitsToFloat(data.getInt(index));
break;
default :
throw new IllegalStateException("Unknown luminance format type.");
}
}
