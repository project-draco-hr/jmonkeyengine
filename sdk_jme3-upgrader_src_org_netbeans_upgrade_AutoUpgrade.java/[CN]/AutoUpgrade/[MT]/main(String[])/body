{
  String noteChangedDefaults="";
  if (madeObsoleteMessagesLog()) {
    noteChangedDefaults=NbBundle.getMessage(AutoUpgrade.class,"MSG_ChangedDefaults",System.getProperty("netbeans.user",""));
  }
  File sourceFolder=checkPreviousOnOsSpecificPlace(NEWER_VERSION_TO_CHECK);
  if (sourceFolder == null) {
    sourceFolder=checkPrevious(VERSION_TO_CHECK);
  }
  if (sourceFolder != null) {
    if (!showUpgradeDialog(sourceFolder,noteChangedDefaults)) {
      throw new org.openide.util.UserCancelException();
    }
    copyToUserdir(sourceFolder);
    Importer.doImport();
  }
 else   if (!noteChangedDefaults.isEmpty()) {
    showNoteDialog(noteChangedDefaults);
  }
}
