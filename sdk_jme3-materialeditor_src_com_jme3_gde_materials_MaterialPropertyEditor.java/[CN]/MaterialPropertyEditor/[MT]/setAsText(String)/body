{
  if ("create j3m file".equals(text)) {
    AbstractSceneExplorerNode geom=SceneExplorerTopComponent.findInstance().getLastSelected();
    assert(geom != null);
    ProjectAssetManager pm=geom.getLookup().lookup(ProjectAssetManager.class);
    assert(pm != null);
    DataObject obj=geom.getLookup().lookup(DataObject.class);
    assert(obj != null);
    FileObject currentFile=obj.getPrimaryFile();
    FileObject currentFolder=currentFile.getParent();
    try {
      int i=1;
      FileObject newFile=currentFolder.getFileObject(currentFile.getName() + "_" + i,"j3m");
      while (newFile != null) {
        i++;
        newFile=currentFolder.getFileObject(currentFile.getName() + "_" + i,"j3m");
      }
      newFile=currentFolder.createData(currentFile.getName() + "_" + i,"j3m");
      MaterialProperties properties=new MaterialProperties(newFile,pm);
      material.setAssetName(pm.getRelativeAssetPath(newFile.getPath()));
      properties.setAsMaterial(material);
      currentFolder.refresh();
      applyMaterial(material.getAssetName());
    }
 catch (    IOException ex) {
      Exceptions.printStackTrace(ex);
      return;
    }
  }
 else {
    applyMaterial(text);
  }
}
