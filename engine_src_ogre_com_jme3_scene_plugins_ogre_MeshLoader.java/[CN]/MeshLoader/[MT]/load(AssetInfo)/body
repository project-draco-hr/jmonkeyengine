{
  try {
    AssetKey key=info.getKey();
    meshName=key.getName();
    folderName=key.getFolder();
    String ext=key.getExtension();
    meshName=meshName.substring(0,meshName.length() - ext.length() - 1);
    if (folderName != null && folderName.length() > 0) {
      meshName=meshName.substring(folderName.length());
    }
    assetManager=info.getManager();
    OgreMeshKey meshKey=null;
    if (key instanceof OgreMeshKey) {
      meshKey=(OgreMeshKey)key;
      materialList=meshKey.getMaterialList();
      String materialName=meshKey.getMaterialName();
      if (materialList == null) {
        if (materialName != null) {
          try {
            materialList=(MaterialList)assetManager.loadAsset(new OgreMaterialKey(folderName + materialName + ".material"));
          }
 catch (          AssetNotFoundException e) {
            logger.log(Level.WARNING,"Cannot locate {0}{1}.material for model {2}{3}.{4}",new Object[]{folderName,materialName,folderName,meshName,ext});
          }
        }
 else {
          try {
            materialList=(MaterialList)assetManager.loadAsset(new OgreMaterialKey(folderName + meshName + ".material"));
          }
 catch (          AssetNotFoundException e) {
            logger.log(Level.WARNING,"Cannot locate {0}{1}.material for model {2}{3}.{4}",new Object[]{folderName,meshName,folderName,meshName,ext});
          }
        }
      }
    }
 else {
      try {
        materialList=(MaterialList)assetManager.loadAsset(new OgreMaterialKey(folderName + meshName + ".material"));
      }
 catch (      AssetNotFoundException e) {
        logger.log(Level.WARNING,"Cannot locate {0}{1}.material for model {2}{3}.{4}",new Object[]{folderName,meshName,folderName,meshName,ext});
      }
    }
    SAXParserFactory factory=SAXParserFactory.newInstance();
    factory.setNamespaceAware(true);
    XMLReader xr=factory.newSAXParser().getXMLReader();
    xr.setContentHandler(this);
    xr.setErrorHandler(this);
    InputStreamReader r=null;
    try {
      r=new InputStreamReader(info.openStream());
      xr.parse(new InputSource(r));
    }
  finally {
      if (r != null) {
        r.close();
      }
    }
    return compileModel();
  }
 catch (  SAXException ex) {
    IOException ioEx=new IOException("Error while parsing Ogre3D mesh.xml");
    ioEx.initCause(ex);
    throw ioEx;
  }
catch (  ParserConfigurationException ex) {
    IOException ioEx=new IOException("Error while parsing Ogre3D mesh.xml");
    ioEx.initCause(ex);
    throw ioEx;
  }
}
