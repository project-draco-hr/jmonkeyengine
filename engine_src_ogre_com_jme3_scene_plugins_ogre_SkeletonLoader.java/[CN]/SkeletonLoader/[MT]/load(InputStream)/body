{
  try {
    XMLReader xr;
    if (JmeSystem.getFullName().toUpperCase().contains("ANDROID")) {
      SAXParserFactory factory=SAXParserFactory.newInstance();
      factory.setNamespaceAware(true);
      xr=factory.newSAXParser().getXMLReader();
    }
 else {
      xr=XMLReaderFactory.createXMLReader();
    }
    xr.setContentHandler(this);
    xr.setErrorHandler(this);
    InputStreamReader r=new InputStreamReader(in);
    xr.parse(new InputSource(r));
    if (animations == null) {
      animations=new ArrayList<BoneAnimation>();
    }
    AnimData data=new AnimData(skeleton,animations);
    skeleton=null;
    animations=null;
    return data;
  }
 catch (  SAXException ex) {
    IOException ioEx=new IOException("Error while parsing Ogre3D dotScene");
    ioEx.initCause(ex);
    fullReset();
    throw ioEx;
  }
catch (  ParserConfigurationException ex) {
    IOException ioEx=new IOException("Error while parsing Ogre3D dotScene");
    ioEx.initCause(ex);
    fullReset();
    throw ioEx;
  }
}
