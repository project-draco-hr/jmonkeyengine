{
  if (currentWeightSum == 1f) {
    currentWeightSum=-1;
  }
 else   if (currentWeightSum != -1f) {
    if (currentWeightSum == 0) {
      localRot.set(initialRot);
      localPos.set(initialPos);
      localScale.set(initialScale);
    }
 else {
      float invWeightSum=1f - currentWeightSum;
      localRot.nlerp(initialRot,invWeightSum);
      localPos.interpolate(initialPos,invWeightSum);
      localScale.interpolate(initialScale,invWeightSum);
    }
    currentWeightSum=-1;
  }
  if (parent != null) {
    parent.worldRot.mult(localRot,worldRot);
    parent.worldScale.mult(localScale,worldScale);
    parent.worldRot.mult(localPos,worldPos);
    worldPos.multLocal(parent.worldScale);
    worldPos.addLocal(parent.worldPos);
  }
 else {
    worldRot.set(localRot);
    worldPos.set(localPos);
    worldScale.set(localScale);
  }
  if (attachNode != null) {
    attachNode.setLocalTranslation(worldPos);
    attachNode.setLocalRotation(worldRot);
    attachNode.setLocalScale(worldScale);
  }
}
