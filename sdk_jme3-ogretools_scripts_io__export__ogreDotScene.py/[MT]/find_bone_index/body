def find_bone_index(ob, arm, groupidx):
    if (groupidx < len(ob.vertex_groups)):
        vg = ob.vertex_groups[groupidx]
        j = 0
        for (i, bone) in enumerate(arm.pose.bones):
            if ((not bone.bone.use_deform) and CONFIG['ONLY_DEFORMABLE_BONES']):
                j += 1
            if (bone.name == vg.name):
                return (i - j)
    else:
        print ('WARNING: object vertex groups not in sync with armature', ob, arm, groupidx)
