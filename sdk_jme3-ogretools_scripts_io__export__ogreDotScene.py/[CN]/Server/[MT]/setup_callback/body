def setup_callback(self, context):
    print 'SERVER: setup frame update callback'
    if self._handle:
        return self._handle
    for area in bpy.context.window.screen.areas:
        if (area.type == 'VIEW_3D'):
            for reg in area.regions:
                if (reg.type == 'WINDOW'):
                    self._handle = reg.callback_add(self.threadsafe, (reg,), 'PRE_VIEW')
                    self._area = area
                    self._region = reg
                    break
    if (not self._handle):
        print 'SERVER: FAILED to setup frame update callback'
