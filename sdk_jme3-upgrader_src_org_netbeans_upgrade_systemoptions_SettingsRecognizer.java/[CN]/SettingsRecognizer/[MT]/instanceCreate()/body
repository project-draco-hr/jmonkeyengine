{
  Object inst=null;
  inst=readSerial(getSerializedInstance());
  if (inst == null) {
    if (instanceMethod != null) {
      inst=createFromMethod(instanceClass,instanceMethod);
    }
 else {
      Class<?> clazz=instanceClass();
      if (SharedClassObject.class.isAssignableFrom(clazz)) {
        inst=SharedClassObject.findObject(clazz.asSubclass(SharedClassObject.class),false);
        if (null != inst) {
          try {
            Method method=SharedClassObject.class.getDeclaredMethod("reset",new Class[0]);
            method.setAccessible(true);
            method.invoke(inst,new Object[0]);
          }
 catch (          Exception e) {
            ErrorManager.getDefault().notify(e);
          }
        }
 else {
          inst=SharedClassObject.findObject(clazz.asSubclass(SharedClassObject.class),true);
        }
      }
 else {
        try {
          inst=clazz.newInstance();
        }
 catch (        Exception ex) {
          IOException ioe=new IOException();
          ErrorManager emgr=ErrorManager.getDefault();
          emgr.annotate(ioe,ex);
          emgr.annotate(ioe,"Content: \n" + getFileContent(source));
          emgr.annotate(ioe,"Class: " + clazz);
          emgr.annotate(ioe,"Source: " + source);
          throw ioe;
        }
      }
    }
  }
  return inst;
}
