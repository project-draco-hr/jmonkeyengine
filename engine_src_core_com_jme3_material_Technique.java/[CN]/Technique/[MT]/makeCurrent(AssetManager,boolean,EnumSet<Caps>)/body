{
  if (!def.isUsingShaders()) {
    return;
  }
  if (techniqueSwitched) {
    ListMap params=owner.getParamsMap();
    if (!defines.equalsParams(params,def)) {
      defines.clear();
      for (int i=0; i < params.size(); i++) {
        MatParam param=(MatParam)params.getValue(i);
        String defineName=def.getShaderParamDefine(param.getName());
        if (defineName != null) {
          defines.set(defineName,param.getVarType(),param.getValue());
        }
      }
      needReload=true;
    }
  }
  if (needReload) {
    loadShader(assetManager,rendererCaps);
  }
}
