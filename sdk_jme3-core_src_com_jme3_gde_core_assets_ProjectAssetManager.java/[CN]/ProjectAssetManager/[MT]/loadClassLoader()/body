{
  Sources sources=project.getLookup().lookup(Sources.class);
  if (sources != null) {
    if (loader != null) {
      removeClassLoader(loader);
    }
    SourceGroup[] groups=sources.getSourceGroups(JavaProjectConstants.SOURCES_TYPE_JAVA);
    List<URL> urls=new LinkedList<URL>();
    for (    SourceGroup sourceGroup : groups) {
      ClassPath path=ClassPath.getClassPath(sourceGroup.getRootFolder(),ClassPath.EXECUTE);
      if (path != null) {
        try {
          FileObject[] roots=path.getRoots();
          for (          FileObject fileObject : roots) {
            if (!fileObject.equals(getAssetFolder())) {
              FileChangeListener listener=new FileChangeListener(){
                public void fileFolderCreated(                FileEvent fe){
                }
                public void fileDataCreated(                FileEvent fe){
                  if (!fe.isExpected()) {
                    notifyClassPathListeners();
                  }
                }
                public void fileChanged(                FileEvent fe){
                  if (!fe.isExpected()) {
                    notifyClassPathListeners();
                  }
                }
                public void fileDeleted(                FileEvent fe){
                }
                public void fileRenamed(                FileRenameEvent fre){
                }
                public void fileAttributeChanged(                FileAttributeEvent fae){
                }
              }
;
              fileObject.addRecursiveListener(listener);
              Logger.getLogger(this.getClass().getName()).log(Level.INFO,"Add classpath:{0}",fileObject);
              classPathItems.add(new ClassPathItem(fileObject,listener));
              urls.add(fileObject.toURL());
            }
            if (fileObject.toURL().toExternalForm().startsWith("jar")) {
              Logger.getLogger(this.getClass().getName()).log(Level.INFO,"Add locator:{0}",fileObject.getURL());
              jarItems.add(fileObject);
              registerLocator(fileObject.toURL().toExternalForm(),"com.jme3.asset.plugins.UrlLocator");
            }
          }
        }
 catch (        FileStateInvalidException ex) {
          Exceptions.printStackTrace(ex);
        }
      }
    }
    loader=new URLClassLoader(urls.toArray(new URL[urls.size()]),getClass().getClassLoader());
    addClassLoader(loader);
  }
}
