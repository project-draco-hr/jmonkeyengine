{
  if ((Pbuffer.getCapabilities() & Pbuffer.PBUFFER_SUPPORTED) == 0) {
    logger.severe("Offscreen surfaces are not supported.");
    return;
  }
  int samples=0;
  if (settings.getSamples() > 1) {
    samples=settings.getSamples();
  }
  pixelFormat=new PixelFormat(settings.getBitsPerPixel(),0,settings.getDepthBits(),settings.getStencilBits(),settings.getSamples());
  width=settings.getWidth();
  height=settings.getHeight();
  try {
    Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler(){
      public void uncaughtException(      Thread thread,      Throwable thrown){
        listener.handleError("Uncaught exception thrown in " + thread.toString(),thrown);
      }
    }
);
    pbuffer=new Pbuffer(width,height,pixelFormat,null,null,createContextAttribs());
    pbuffer.makeCurrent();
    renderable.set(true);
    logger.info("Offscreen buffer created.");
    printContextInitInfo();
  }
 catch (  LWJGLException ex) {
    listener.handleError("Failed to create display",ex);
  }
 finally {
  }
  super.internalCreate();
  listener.initialize();
}
