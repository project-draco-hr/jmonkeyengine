{
  int texId=img.getId();
  if (texId == -1) {
    glGenTextures(ib1);
    texId=ib1.get(0);
    img.setId(texId);
    objManager.registerForCleanup(img);
    statistics.onNewTexture();
  }
  int target=convertTextureType(type);
  if (context.boundTextures[unit] != img) {
    glEnable(target);
    glBindTexture(target,texId);
    context.boundTextures[unit]=img;
    statistics.onTextureUse(img,true);
  }
  if (!img.hasMipmaps() && mips) {
    MipMapGenerator.generateMipMaps(img);
  }
 else {
  }
  TextureUtil.uploadTexture(img,target,0,0,false);
  img.clearUpdateNeeded();
}
