{
  int bits=0;
  if (color) {
    if (context.colorWriteEnabled == false) {
      glColorMask(true,true,true,true);
      context.colorWriteEnabled=true;
    }
    bits=GL_COLOR_BUFFER_BIT;
  }
  if (depth) {
    if (context.depthWriteEnabled == false) {
      glDepthMask(true);
      context.depthWriteEnabled=true;
    }
    bits|=GL_DEPTH_BUFFER_BIT;
  }
  if (stencil) {
    bits|=GL_STENCIL_BUFFER_BIT;
  }
  if (bits != 0) {
    glClear(bits);
  }
}
