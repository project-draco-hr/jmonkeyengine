{
  int arrayType=convertArrayType(vb.getBufferType());
  if (arrayType == -1) {
    return;
  }
  if (vb.isUpdateNeeded() && idb == null) {
    updateBufferData(vb);
  }
  int bufId=idb != null ? idb.getId() : vb.getId();
  if (context.boundArrayVBO != bufId) {
    gl.glBindBuffer(gl.GL_ARRAY_BUFFER,bufId);
    context.boundArrayVBO=bufId;
  }
  gl.glEnableClientState(arrayType);
  context.boundAttribs[vb.getBufferType().ordinal()]=vb;
  if (vb.getBufferType() == Type.Normal) {
    if (vb.isNormalized() && !context.normalizeEnabled) {
      gl.glEnable(gl.GL_NORMALIZE);
      context.normalizeEnabled=true;
    }
 else     if (!vb.isNormalized() && context.normalizeEnabled) {
      gl.glDisable(gl.GL_NORMALIZE);
      context.normalizeEnabled=false;
    }
  }
  int comps=vb.getNumComponents();
  int type=convertVertexFormat(vb.getFormat());
switch (vb.getBufferType()) {
case Position:
    gl.glVertexPointer(comps,type,vb.getStride(),vb.getOffset());
  break;
case Normal:
gl.glNormalPointer(type,vb.getStride(),vb.getOffset());
break;
case Color:
gl.glColorPointer(comps,type,vb.getStride(),vb.getOffset());
break;
case TexCoord:
gl.glTexCoordPointer(comps,type,vb.getStride(),vb.getOffset());
break;
}
}
