{
  if (forPbuffer) {
    if (pbufferFormat == null) {
      pbufferFormat=new PixelFormat(settings.getBitsPerPixel(),0,settings.getDepthBits(),settings.getStencilBits(),0);
    }
    return pbufferFormat;
  }
 else {
    if (canvasFormat == null) {
      int samples=getNumSamplesToUse();
      canvasFormat=new PixelFormat(settings.getBitsPerPixel(),0,settings.getDepthBits(),settings.getStencilBits(),samples);
    }
    return canvasFormat;
  }
}
