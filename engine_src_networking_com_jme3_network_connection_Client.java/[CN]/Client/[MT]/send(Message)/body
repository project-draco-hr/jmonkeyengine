{
  if (!isConnected)   throw new IOException("Not connected yet. Use connect() first.");
  try {
    if (message.isReliable()) {
      messageQueue.add(message);
      if (!isConnector) {
        tcp.socketChannel.keyFor(tcp.selector).interestOps(SelectionKey.OP_READ | SelectionKey.OP_WRITE);
      }
 else {
        tcpChannel.keyFor(tcp.selector).interestOps(SelectionKey.OP_READ | SelectionKey.OP_WRITE);
      }
    }
 else {
      udp.sendObject(message);
    }
  }
 catch (  CancelledKeyException e) {
  }
}
