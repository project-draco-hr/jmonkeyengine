{
  int putIndex=0;
  if (smooth) {
    int indexBufferSize=(bevelRepeats - 1) * (bevelShapeVertexCount - 1) * 6;
    IndexBuffer result=IndexBuffer.createIndexBuffer(indexBufferSize,indexBufferSize);
    for (int i=0; i < bevelRepeats - 1; ++i) {
      for (int j=0; j < bevelShapeVertexCount - 1; ++j) {
        result.put(putIndex++,i * bevelShapeVertexCount + j);
        result.put(putIndex++,i * bevelShapeVertexCount + j + 1);
        result.put(putIndex++,(i + 1) * bevelShapeVertexCount + j);
        result.put(putIndex++,i * bevelShapeVertexCount + j + 1);
        result.put(putIndex++,(i + 1) * bevelShapeVertexCount + j + 1);
        result.put(putIndex++,(i + 1) * bevelShapeVertexCount + j);
      }
    }
    return result;
  }
 else {
    int indexBufferSize=bevelShapeVertexCount * bevelRepeats * 6;
    IndexBuffer result=IndexBuffer.createIndexBuffer(indexBufferSize,indexBufferSize);
    for (int i=0; i < indexBufferSize; ++i) {
      result.put(putIndex++,i);
    }
    return result;
  }
}
