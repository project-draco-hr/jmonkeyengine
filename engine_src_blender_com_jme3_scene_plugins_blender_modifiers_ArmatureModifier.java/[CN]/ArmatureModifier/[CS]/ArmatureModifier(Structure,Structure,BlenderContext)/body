{
  if (this.validate(modifierStructure,blenderContext)) {
    Pointer pArmatureObject=(Pointer)modifierStructure.getFieldValue("object");
    if (pArmatureObject.isNotNull()) {
      ObjectHelper objectHelper=blenderContext.getHelper(ObjectHelper.class);
      ArmatureHelper armatureHelper=blenderContext.getHelper(ArmatureHelper.class);
      Structure armatureObject=pArmatureObject.fetchData(blenderContext.getInputStream()).get(0);
      this.armatureObjectOMA=armatureObject.getOldMemoryAddress();
      Structure armatureStructure=((Pointer)armatureObject.getFieldValue("data")).fetchData(blenderContext.getInputStream()).get(0);
      Structure bonebase=(Structure)armatureStructure.getFieldValue("bonebase");
      List<Structure> bonesStructures=bonebase.evaluateListBase(blenderContext);
      for (      Structure boneStructure : bonesStructures) {
        BoneTransformationData rootBoneTransformationData=armatureHelper.readBoneAndItsChildren(boneStructure,null,blenderContext);
        armatureHelper.addBoneDataRoot(rootBoneTransformationData);
      }
      Matrix4f armatureObjectMatrix=objectHelper.getTransformationMatrix(armatureObject);
      Matrix4f inverseMeshObjectMatrix=objectHelper.getTransformationMatrix(objectStructure).invert();
      Matrix4f additionalRootBoneTransformation=inverseMeshObjectMatrix.multLocal(armatureObjectMatrix);
      Bone[] bones=armatureHelper.buildBonesStructure(Long.valueOf(0L),additionalRootBoneTransformation);
      Structure meshStructure=((Pointer)objectStructure.getFieldValue("data")).fetchData(blenderContext.getInputStream()).get(0);
      this.meshOMA=meshStructure.getOldMemoryAddress();
      this.readVerticesWeightsData(objectStructure,meshStructure,blenderContext);
      String objectName=objectStructure.getName();
      Set<String> animationNames=blenderContext.getBlenderKey().getAnimationNames(objectName);
      System.out.println("Loaded animation " + objectName);
      if (animationNames != null && animationNames.size() > 0) {
        ArrayList<Animation> animations=new ArrayList<Animation>();
        List<FileBlockHeader> actionHeaders=blenderContext.getFileBlocks(Integer.valueOf(FileBlockHeader.BLOCK_AC00));
        for (        FileBlockHeader header : actionHeaders) {
          Structure actionStructure=header.getStructure(blenderContext);
          String actionName=actionStructure.getName();
          if (animationNames.contains(actionName)) {
            int[] animationFrames=blenderContext.getBlenderKey().getAnimationFrames(objectName,actionName);
            int fps=blenderContext.getBlenderKey().getFps();
            float start=(float)animationFrames[0] / (float)fps;
            float stop=(float)animationFrames[1] / (float)fps;
            Animation boneAnimation=new Animation(actionName,stop - start);
            boneAnimation.setTracks(armatureHelper.getTracks(actionStructure,blenderContext,objectName,actionName));
            animations.add(boneAnimation);
          }
        }
        animData=new AnimData(new Skeleton(bones),animations);
      }
    }
  }
}
