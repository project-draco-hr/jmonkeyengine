{
  PhysicsRigidBody parentShape=parent;
  if (boneList.isEmpty() || boneList.contains(bone.getName())) {
    PhysicsBoneLink link=new PhysicsBoneLink();
    link.bone=bone;
    PhysicsRigidBody shapeNode=new PhysicsRigidBody(makeShape(link,model),rootMass / (float)reccount);
    shapeNode.setKinematic(mode == Mode.Kinetmatic);
    totalMass+=rootMass / (float)reccount;
    link.rigidBody=shapeNode;
    link.initalWorldRotation=bone.getModelSpaceRotation().clone();
    if (parent != null) {
      Vector3f posToParent=new Vector3f();
      if (bone.getParent() != null) {
        bone.getModelSpacePosition().subtract(bone.getParent().getModelSpacePosition(),posToParent).multLocal(initScale);
      }
      link.pivotA=posToParent;
      link.pivotB=new Vector3f(0,0,0f);
      SixDofJoint joint=new SixDofJoint(parent,shapeNode,link.pivotA,link.pivotB,true);
      preset.setupJointForBone(bone.getName(),joint);
      link.joint=joint;
      joint.setCollisionBetweenLinkedBodys(false);
    }
    boneLinks.put(bone.getName(),link);
    shapeNode.setUserObject(link);
    parentShape=shapeNode;
  }
  for (Iterator<Bone> it=bone.getChildren().iterator(); it.hasNext(); ) {
    Bone childBone=it.next();
    boneRecursion(model,childBone,parentShape,reccount + 1);
  }
}
