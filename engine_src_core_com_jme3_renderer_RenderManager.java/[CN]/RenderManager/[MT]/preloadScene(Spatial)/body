{
  if (scene instanceof Node) {
    Node n=(Node)scene;
    List<Spatial> children=n.getChildren();
    for (int i=0; i < children.size(); i++) {
      preloadScene(children.get(i));
    }
  }
 else   if (scene instanceof Geometry) {
    Geometry gm=(Geometry)scene;
    if (gm.getMaterial() == null) {
      throw new IllegalStateException("No material is set for Geometry: " + gm.getName());
    }
    gm.getMaterial().preload(this);
    Mesh mesh=gm.getMesh();
    if (mesh != null) {
      for (      Entry<VertexBuffer> entry : mesh.getBuffers()) {
        VertexBuffer buf=entry.getValue();
        if (buf.getData() != null) {
          renderer.updateBufferData(buf);
        }
      }
    }
  }
}
