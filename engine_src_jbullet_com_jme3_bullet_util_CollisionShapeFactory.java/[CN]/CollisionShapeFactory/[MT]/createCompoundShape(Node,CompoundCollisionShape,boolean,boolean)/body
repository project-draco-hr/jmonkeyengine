{
  for (  Spatial spatial : rootNode.getChildren()) {
    if (spatial instanceof Node) {
      createCompoundShape((Node)spatial,shape,meshAccurate,dynamic);
    }
 else     if (spatial instanceof Geometry) {
      if (meshAccurate) {
        CollisionShape childShape=dynamic ? createSingleDynamicMeshShape((Geometry)spatial) : createSingleMeshShape((Geometry)spatial);
        if (childShape != null) {
          shape.addChildShape(childShape,spatial.getWorldTranslation(),spatial.getWorldRotation().toRotationMatrix());
        }
      }
 else {
        shape.addChildShape(createSingleBoxShape(spatial),spatial.getWorldTranslation(),spatial.getWorldRotation().toRotationMatrix());
      }
    }
  }
  return shape;
}
