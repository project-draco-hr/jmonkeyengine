{
  boolean active=true;
  int activeBufferCount=0;
  for (  int id : stream.getIds()) {
    active=fillBuffer(stream,id);
    ib.position(0).limit(1);
    ib.put(id).flip();
    if (active) {
      alSourceQueueBuffers(sourceId,1,ib);
      checkError(true);
      activeBufferCount++;
    }
  }
  if (activeBufferCount < STREAMING_BUFFER_COUNT) {
    int[] newIds=new int[activeBufferCount];
    for (int i=0; i < STREAMING_BUFFER_COUNT; i++) {
      if (i < activeBufferCount) {
        newIds[i]=stream.getIds()[i];
      }
 else {
        ib.clear();
        ib.put(stream.getIds()[i]).limit(1).flip();
        alDeleteBuffers(1,ib);
        checkError(true);
      }
    }
    stream.setIds(newIds);
  }
  return active;
}
