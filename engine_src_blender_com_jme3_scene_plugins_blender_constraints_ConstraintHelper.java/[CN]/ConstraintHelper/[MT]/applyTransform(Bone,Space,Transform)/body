{
switch (space) {
case CONSTRAINT_SPACE_LOCAL:
    bone.setBindTransforms(transform.getTranslation(),transform.getRotation(),transform.getScale());
  break;
case CONSTRAINT_SPACE_WORLD:
Matrix4f m=this.getParentWorldTransformMatrix(bone);
transform.setTranslation(m.mult(transform.getTranslation()));
transform.setRotation(m.mult(transform.getRotation(),null));
transform.setScale(transform.getScale());
bone.setBindTransforms(transform.getTranslation(),transform.getRotation(),transform.getScale());
break;
case CONSTRAINT_SPACE_PARLOCAL:
Vector3f parentLocalTranslation=bone.getLocalPosition().add(transform.getTranslation());
Quaternion parentLocalRotation=bone.getLocalRotation().mult(transform.getRotation());
bone.setBindTransforms(parentLocalTranslation,parentLocalRotation,transform.getScale());
break;
case CONSTRAINT_SPACE_POSE:
bone.setBindTransforms(transform.getTranslation(),transform.getRotation(),transform.getScale());
break;
default :
throw new IllegalStateException("Invalid space type for target object: " + space.toString());
}
}
