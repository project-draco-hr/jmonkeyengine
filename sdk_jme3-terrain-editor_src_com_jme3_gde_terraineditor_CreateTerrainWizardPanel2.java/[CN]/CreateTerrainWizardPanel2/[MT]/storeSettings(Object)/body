{
  CreateTerrainVisualPanel2 comp=(CreateTerrainVisualPanel2)getComponent();
  if ("Flat".equals(comp.getHeightmapTypeComboBox().getSelectedItem())) {
    heightmap=new FlatHeightmap(terrainTotalSize);
  }
 else   if ("Image Based".equals(comp.getHeightmapTypeComboBox().getSelectedItem())) {
    BufferedImage bi=null;
    try {
      bi=ImageIO.read(new File(comp.getImageBrowseTextField().getText()));
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
    ImageBasedHeightMap ibhm=new ImageBasedHeightMap(bi,1f);
    heightmap=ibhm;
  }
 else   if ("Hill".equals(comp.getHeightmapTypeComboBox().getSelectedItem())) {
    int iterations=new Integer(comp.getHillIterationsTextField().getText());
    byte flattening=new Byte(comp.getHillFlatteningTextField().getText());
    float min=new Float(comp.getHillMinRadiusTextField().getText());
    float max=new Float(comp.getHillMaxRadiusTextField().getText());
    try {
      heightmap=new HillHeightMap(terrainTotalSize,iterations,min,max,flattening);
    }
 catch (    Exception ex) {
      Exceptions.printStackTrace(ex);
    }
  }
  WizardDescriptor wiz=(WizardDescriptor)settings;
  wiz.putProperty("abstractHeightMap",heightmap);
}
