{
  Batch batch=batchesByGeom.get(bg);
  if (batch != null) {
    Mesh mesh=batch.geometry.getMesh();
    VertexBuffer pvb=mesh.getBuffer(VertexBuffer.Type.Position);
    FloatBuffer posBuf=(FloatBuffer)pvb.getData();
    VertexBuffer nvb=mesh.getBuffer(VertexBuffer.Type.Normal);
    FloatBuffer normBuf=(FloatBuffer)nvb.getData();
    if (mesh.getBuffer(VertexBuffer.Type.Tangent) != null) {
      VertexBuffer tvb=mesh.getBuffer(VertexBuffer.Type.Tangent);
      FloatBuffer tanBuf=(FloatBuffer)tvb.getData();
      doTransformsTangents(posBuf,normBuf,tanBuf,bg.startIndex,bg.startIndex + bg.getVertexCount(),bg.cachedOffsetMat);
      tvb.updateData(tanBuf);
    }
 else {
      doTransforms(posBuf,normBuf,bg.startIndex,bg.startIndex + bg.getVertexCount(),bg.cachedOffsetMat);
    }
    pvb.updateData(posBuf);
    nvb.updateData(normBuf);
    batch.needMeshUpdate=true;
  }
}
