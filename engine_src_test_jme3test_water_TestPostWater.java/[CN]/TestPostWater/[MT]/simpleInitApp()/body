{
  Node mainScene=new Node("Main Scene");
  rootNode.attachChild(mainScene);
  createTerrain(mainScene);
  DirectionalLight sun=new DirectionalLight();
  sun.setDirection(lightDir);
  sun.setColor(ColorRGBA.White.clone().multLocal(1.7f));
  mainScene.addLight(sun);
  DirectionalLight l=new DirectionalLight();
  l.setDirection(Vector3f.UNIT_Y.mult(-1));
  l.setColor(ColorRGBA.White.clone().multLocal(0.3f));
  mainScene.addLight(l);
  flyCam.setMoveSpeed(50);
  cam.setLocation(new Vector3f(-700,100,300));
  cam.setRotation(new Quaternion().fromAngles(new float[]{FastMath.PI * 0.06f,FastMath.PI * 0.65f,0}));
  Spatial sky=SkyFactory.createSky(assetManager,"Scenes/Beach/FullskiesSunset0068.dds",false);
  sky.setLocalScale(350);
  mainScene.attachChild(sky);
  cam.setFrustumFar(4000);
  AudioNode waves=new AudioNode(assetManager,"Sound/Environment/Ocean Waves.ogg",false);
  waves.setLooping(true);
  audioRenderer.playSource(waves);
  fpp=new FilterPostProcessor(assetManager);
  water=new WaterFilter(rootNode,lightDir);
  water.setWaveScale(0.003f);
  water.setMaxAmplitude(2f);
  water.setFoamExistence(new Vector3f(1f,4,0.5f));
  water.setFoamTexture((Texture2D)assetManager.loadTexture("Common/MatDefs/Water/Textures/foam2.jpg"));
  water.setRefractionStrength(0.2f);
  water.setWaterHeight(initialWaterHeight);
  fpp.addFilter(water);
  viewPort.addProcessor(fpp);
  inputManager.addListener(new ActionListener(){
    public void onAction(    String name,    boolean isPressed,    float tpf){
      if (isPressed) {
        if (name.equals("foam1")) {
          water.setFoamTexture((Texture2D)assetManager.loadTexture("Common/MatDefs/Water/Textures/foam.jpg"));
        }
        if (name.equals("foam2")) {
          water.setFoamTexture((Texture2D)assetManager.loadTexture("Common/MatDefs/Water/Textures/foam2.jpg"));
        }
        if (name.equals("foam3")) {
          water.setFoamTexture((Texture2D)assetManager.loadTexture("Common/MatDefs/Water/Textures/foam3.jpg"));
        }
      }
    }
  }
,"foam1","foam2","foam3");
  inputManager.addMapping("foam1",new KeyTrigger(keyInput.KEY_1));
  inputManager.addMapping("foam2",new KeyTrigger(keyInput.KEY_2));
  inputManager.addMapping("foam3",new KeyTrigger(keyInput.KEY_3));
}
