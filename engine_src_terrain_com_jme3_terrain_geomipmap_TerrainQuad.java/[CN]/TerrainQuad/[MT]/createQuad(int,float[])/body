{
  int quarterSize=size >> 2;
  int split=(size + 1) >> 1;
  Vector2f tempOffset=new Vector2f();
  offsetAmount+=quarterSize;
  if (lodCalculatorFactory == null)   lodCalculatorFactory=new LodDistanceCalculatorFactory();
  float[] heightBlock1=createHeightSubBlock(heightMap,0,0,split);
  Vector3f origin1=new Vector3f(-quarterSize * stepScale.x,0,-quarterSize * stepScale.z);
  tempOffset.x=offset.x;
  tempOffset.y=offset.y;
  tempOffset.x+=origin1.x;
  tempOffset.y+=origin1.z;
  TerrainQuad quad1=new TerrainQuad(getName() + "Quad1",blockSize,split,stepScale,heightBlock1,totalSize,tempOffset,offsetAmount,lodCalculatorFactory);
  quad1.setLocalTranslation(origin1);
  quad1.quadrant=1;
  this.attachChild(quad1);
  float[] heightBlock2=createHeightSubBlock(heightMap,0,split - 1,split);
  Vector3f origin2=new Vector3f(-quarterSize * stepScale.x,0,quarterSize * stepScale.z);
  tempOffset=new Vector2f();
  tempOffset.x=offset.x;
  tempOffset.y=offset.y;
  tempOffset.x+=origin2.x;
  tempOffset.y+=origin2.z;
  TerrainQuad quad2=new TerrainQuad(getName() + "Quad2",blockSize,split,stepScale,heightBlock2,totalSize,tempOffset,offsetAmount,lodCalculatorFactory);
  quad2.setLocalTranslation(origin2);
  quad2.quadrant=2;
  this.attachChild(quad2);
  float[] heightBlock3=createHeightSubBlock(heightMap,split - 1,0,split);
  Vector3f origin3=new Vector3f(quarterSize * stepScale.x,0,-quarterSize * stepScale.z);
  tempOffset=new Vector2f();
  tempOffset.x=offset.x;
  tempOffset.y=offset.y;
  tempOffset.x+=origin3.x;
  tempOffset.y+=origin3.z;
  TerrainQuad quad3=new TerrainQuad(getName() + "Quad3",blockSize,split,stepScale,heightBlock3,totalSize,tempOffset,offsetAmount,lodCalculatorFactory);
  quad3.setLocalTranslation(origin3);
  quad3.quadrant=3;
  this.attachChild(quad3);
  float[] heightBlock4=createHeightSubBlock(heightMap,split - 1,split - 1,split);
  Vector3f origin4=new Vector3f(quarterSize * stepScale.x,0,quarterSize * stepScale.z);
  tempOffset=new Vector2f();
  tempOffset.x=offset.x;
  tempOffset.y=offset.y;
  tempOffset.x+=origin4.x;
  tempOffset.y+=origin4.z;
  TerrainQuad quad4=new TerrainQuad(getName() + "Quad4",blockSize,split,stepScale,heightBlock4,totalSize,tempOffset,offsetAmount,lodCalculatorFactory);
  quad4.setLocalTranslation(origin4);
  quad4.quadrant=4;
  this.attachChild(quad4);
}
