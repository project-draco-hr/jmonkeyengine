{
  if (!pressed) {
    setDefaultAxisMarkerColors();
    pickedMarker=null;
    constraintAxis=Vector3f.UNIT_XYZ;
    if (wasDragging) {
      actionPerformed(new MoveUndo(toolController.getSelectedSpatial(),startPosition,lastPosition));
      wasDragging=false;
    }
    pickManager.reset();
  }
 else   if (wasDragging == true) {
    if (!pickManager.updatePick(camera,screenCoord)) {
      return;
    }
    Vector3f diff=Vector3f.ZERO;
    if (pickedMarker.equals(QUAD_XY) || pickedMarker.equals(QUAD_XZ) || pickedMarker.equals(QUAD_YZ)) {
      diff=pickManager.getTranslation();
    }
 else     if (pickedMarker.equals(ARROW_X) || pickedMarker.equals(ARROW_Y) || pickedMarker.equals(ARROW_Z)) {
      diff=pickManager.getTranslation(constraintAxis);
    }
    Vector3f position=startPosition.add(diff);
    lastPosition=position;
    toolController.getSelectedSpatial().setLocalTranslation(position);
    updateToolsTransformation();
  }
}
