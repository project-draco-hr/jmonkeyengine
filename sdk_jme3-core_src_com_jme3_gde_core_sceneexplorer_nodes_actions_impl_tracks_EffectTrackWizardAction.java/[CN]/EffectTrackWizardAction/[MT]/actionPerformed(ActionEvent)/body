{
  WizardDescriptor wizardDescriptor=new WizardDescriptor(getPanels());
  wizardDescriptor.setTitleFormat(new MessageFormat("{0}"));
  wizardDescriptor.setTitle("Create a new EffectTrack");
  Dialog dialog=DialogDisplayer.getDefault().createDialog(wizardDescriptor);
  dialog.setVisible(true);
  dialog.toFront();
  boolean cancelled=wizardDescriptor.getValue() != WizardDescriptor.FINISH_OPTION;
  if (!cancelled) {
    ParticleEmitter emitter=(ParticleEmitter)wizardDescriptor.getProperty("Emitter");
    float startOffset=(Float)wizardDescriptor.getProperty("startOffset");
    Animation anim=animation.getLookup().lookup(Animation.class);
    anim.addTrack(new EffectTrack(emitter,anim.getLength(),startOffset));
    animation.refresh(false);
    animation.setChanged();
  }
}
