{
  try {
    Object obj=Serializer.readClassAndObject(buffer);
    Message m=(Message)obj;
    if (m instanceof ClientRegistrationMessage) {
      server.registerClient(this,p,(ClientRegistrationMessage)m);
      return;
    }
    HostedConnection source=getConnection(p);
    messageDispatcher.messageReceived(source,m);
  }
 catch (  IOException e) {
    throw new RuntimeException("Error deserializing object",e);
  }
}
