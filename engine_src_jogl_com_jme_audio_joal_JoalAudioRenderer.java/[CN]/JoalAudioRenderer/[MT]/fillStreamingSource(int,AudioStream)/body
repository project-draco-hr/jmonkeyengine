{
  if (!stream.isOpen()) {
    return false;
  }
  boolean active=true;
  al.alGetSourcei(sourceId,AL.AL_BUFFERS_PROCESSED,ib);
  int processed=ib.get(0);
  if (processed > 0) {
    int buffer;
    ib.position(0).limit(1);
    al.alSourceUnqueueBuffers(sourceId,1,ib);
    buffer=ib.get(0);
    active=fillBuffer(stream,buffer);
    ib.position(0).limit(1);
    ib.put(0,buffer);
    al.alSourceQueueBuffers(sourceId,1,ib);
  }
  if (!active && stream.isOpen()) {
    stream.close();
  }
  return active;
}
