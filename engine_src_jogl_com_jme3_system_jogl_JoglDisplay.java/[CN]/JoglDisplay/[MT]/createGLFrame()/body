{
  Container contentPane;
  if (useAwt) {
    frame=new Frame(settings.getTitle());
    contentPane=frame;
  }
 else {
    frame=new JFrame(settings.getTitle());
    contentPane=((JFrame)frame).getContentPane();
  }
  contentPane.setLayout(new BorderLayout());
  applySettings(settings);
  frame.setResizable(false);
  frame.setFocusable(true);
  if (settings.getIcons() != null) {
    try {
      Method setIconImages=frame.getClass().getMethod("setIconImages",List.class);
      setIconImages.invoke(frame,Arrays.asList(settings.getIcons()));
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
  contentPane.add(canvas,BorderLayout.CENTER);
  frame.pack();
  if (device.getFullScreenWindow() == null) {
    Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();
    frame.setLocation((screenSize.width - frame.getWidth()) / 2,(screenSize.height - frame.getHeight()) / 2);
  }
  frame.addWindowListener(new WindowAdapter(){
    @Override public void windowClosing(    WindowEvent evt){
      windowCloseRequest.set(true);
    }
    @Override public void windowActivated(    WindowEvent evt){
      active.set(true);
    }
    @Override public void windowDeactivated(    WindowEvent evt){
      active.set(false);
    }
  }
);
}
