{
  Container contentPane;
  if (useAwt) {
    frame=new Frame(settings.getTitle());
    contentPane=frame;
  }
 else {
    frame=new JFrame(settings.getTitle());
    contentPane=((JFrame)frame).getContentPane();
  }
  contentPane.setLayout(new BorderLayout());
  applySettings(settings);
  frame.setResizable(false);
  frame.setFocusable(true);
  contentPane.add(canvas,BorderLayout.CENTER);
  frame.setSize(settings.getWidth(),settings.getHeight());
  if (device.getFullScreenWindow() == null) {
    Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();
    frame.setLocation((screenSize.width - frame.getWidth()) / 2,(screenSize.height - frame.getHeight()) / 2);
  }
  frame.addWindowListener(new WindowAdapter(){
    @Override public void windowClosing(    WindowEvent evt){
      windowCloseRequest.set(true);
    }
    @Override public void windowActivated(    WindowEvent evt){
      active.set(true);
    }
    @Override public void windowDeactivated(    WindowEvent evt){
      active.set(false);
    }
  }
);
}
