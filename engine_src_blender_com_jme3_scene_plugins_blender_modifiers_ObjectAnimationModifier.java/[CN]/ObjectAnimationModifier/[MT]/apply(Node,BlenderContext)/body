{
  if (invalid) {
    LOGGER.log(Level.WARNING,"Armature modifier is invalid! Cannot be applied to: {0}",node.getName());
  }
  if (animData == null) {
    return node;
  }
  ArrayList<Animation> animList=animData.anims;
  if (animList != null && animList.size() > 0) {
    List<Constraint> constraints=blenderContext.getConstraints(this.objectOMA);
    HashMap<String,Animation> anims=new HashMap<String,Animation>();
    for (int i=0; i < animList.size(); ++i) {
      Animation animation=(Animation)animList.get(i).clone();
      if (constraints != null && constraints.size() > 0) {
        for (        Constraint constraint : constraints) {
          constraint.affectAnimation(animation,0);
        }
      }
      anims.put(animation.getName(),animation);
    }
    AnimControl control=new AnimControl(null);
    control.setAnimations(anims);
    node.addControl(control);
  }
  return node;
}
