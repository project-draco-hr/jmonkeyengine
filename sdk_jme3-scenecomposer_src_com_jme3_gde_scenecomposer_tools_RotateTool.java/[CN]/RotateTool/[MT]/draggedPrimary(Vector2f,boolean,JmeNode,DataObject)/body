{
  if (!pressed) {
    setDefaultAxisMarkerColors();
    pickedMarker=null;
    if (wasDragging) {
      actionPerformed(new RotateUndo(toolController.getSelectedSpatial(),startRotate,lastRotate));
      wasDragging=false;
    }
    pickManager.reset();
  }
 else   if (wasDragging) {
    if (!pickManager.updatePick(camera,screenCoord)) {
      return;
    }
    if (pickedMarker.equals(QUAD_XY) || pickedMarker.equals(QUAD_XZ) || pickedMarker.equals(QUAD_YZ)) {
      Quaternion rotation=startRotate.mult(pickManager.getRotation(startRotate.inverse()));
      toolController.getSelectedSpatial().setLocalRotation(rotation);
      lastRotate=rotation;
    }
    updateToolsTransformation();
  }
}
