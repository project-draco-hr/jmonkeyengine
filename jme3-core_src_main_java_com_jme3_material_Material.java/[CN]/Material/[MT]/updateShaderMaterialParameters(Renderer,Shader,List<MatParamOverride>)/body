{
  int unit=0;
  if (overrides != null) {
    for (    MatParamOverride override : overrides) {
      VarType type=override.getVarType();
      MatParam paramDef=def.getMaterialParam(override.getName());
      if (paramDef == null || paramDef.getVarType() != type || !override.isEnabled()) {
        continue;
      }
      Uniform uniform=shader.getUniform(override.getPrefixedName());
      if (override.getValue() != null) {
        if (type.isTextureType()) {
          renderer.setTexture(unit,(Texture)override.getValue());
          uniform.setValue(VarType.Int,unit);
          unit++;
        }
 else {
          uniform.setValue(type,override.getValue());
        }
      }
 else {
        uniform.clearValue();
      }
    }
  }
  for (int i=0; i < paramValues.size(); i++) {
    MatParam param=paramValues.getValue(i);
    VarType type=param.getVarType();
    Uniform uniform=shader.getUniform(param.getPrefixedName());
    if (uniform.isSetByCurrentMaterial()) {
      continue;
    }
    if (type.isTextureType()) {
      renderer.setTexture(unit,(Texture)param.getValue());
      uniform.setValue(VarType.Int,unit);
      unit++;
    }
 else {
      uniform.setValue(type,param.getValue());
    }
  }
  return unit;
}
