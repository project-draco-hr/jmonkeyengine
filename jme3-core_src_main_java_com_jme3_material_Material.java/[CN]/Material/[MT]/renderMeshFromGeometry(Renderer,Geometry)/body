{
  Mesh mesh=geom.getMesh();
  int lodLevel=geom.getLodLevel();
  if (geom instanceof InstancedGeometry) {
    InstancedGeometry instGeom=(InstancedGeometry)geom;
    int numInstances=instGeom.getActualNumInstances();
    if (numInstances == 0) {
      return;
    }
    if (renderer.getCaps().contains(Caps.MeshInstancing)) {
      renderer.renderMesh(mesh,lodLevel,numInstances,instGeom.getAllInstanceData());
    }
 else {
      throw new RendererException("Mesh instancing is not supported by the video hardware");
    }
  }
 else {
    renderer.renderMesh(mesh,lodLevel,1,null);
  }
}
