{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  byte[] buf=new byte[512];
  int read=0;
  try {
    while ((read=vorbisStream.readPcm(buf,0,buf.length)) > 0) {
      baos.write(buf,0,read);
    }
  }
 catch (  EndOfOggStreamException ex) {
  }
  byte[] dataBytes=baos.toByteArray();
  swapBytes(dataBytes,0,dataBytes.length);
  int numSamples=(int)oggStream.getLastOggPage().getAbsoluteGranulePosition();
  int totalBytes=numSamples * streamHdr.getChannels() * 2;
  ByteBuffer data=BufferUtils.createByteBuffer(totalBytes);
  data.put(dataBytes,0,totalBytes).flip();
  vorbisStream.close();
  loStream.close();
  oggStream.close();
  return data;
}
