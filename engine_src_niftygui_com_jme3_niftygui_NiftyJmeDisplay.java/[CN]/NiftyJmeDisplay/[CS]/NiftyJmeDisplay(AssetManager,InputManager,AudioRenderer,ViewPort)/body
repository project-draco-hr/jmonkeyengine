{
  this.assetManager=assetManager;
  w=vp.getCamera().getWidth();
  h=vp.getCamera().getHeight();
  resourceLocation=new ResourceLocationJme();
  ResourceLoader.removeAllResourceLocations();
  ResourceLoader.addResourceLocation(resourceLocation);
  soundDev=new SoundDeviceJme(assetManager,audioRenderer);
  renderDev=new RenderDeviceJme(this);
  inputSys=new InputSystemJme(inputManager);
  if (inputManager != null)   inputManager.addRawInputListener(inputSys);
  nifty=new Nifty(renderDev,soundDev,inputSys,new TimeProvider());
  inputSys.setNifty(nifty);
}
