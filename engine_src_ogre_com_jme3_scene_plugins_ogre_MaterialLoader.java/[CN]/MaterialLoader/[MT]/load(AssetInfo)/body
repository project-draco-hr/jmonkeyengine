{
  folderName=info.getKey().getFolder();
  assetManager=info.getManager();
  MaterialList list;
  scan=new Scanner(info.openStream());
  scan.useLocale(Locale.US);
  if (scan.hasNext("import")) {
    MaterialExtensionSet matExts=null;
    if (info.getKey() instanceof OgreMaterialKey) {
      matExts=((OgreMaterialKey)info.getKey()).getMaterialExtensionSet();
    }
    if (matExts == null) {
      throw new IOException("Must specify MaterialExtensionSet when loading\n" + "Ogre3D materials with extended materials");
    }
    list=new MaterialExtensionLoader().load(assetManager,matExts,scan);
  }
 else {
    list=new MaterialList();
    while (scan.hasNext("material")) {
      readMaterial();
      Material mat=compileMaterial();
      list.put(matName,mat);
    }
  }
  scan.close();
  return list;
}
