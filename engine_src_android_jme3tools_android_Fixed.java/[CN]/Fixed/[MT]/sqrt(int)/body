{
  if (n <= 0) {
    return 0;
  }
  long sum=0;
  int bit=0x40000000;
  while (bit >= 0x100) {
    long tmp=sum | bit;
    if (n >= tmp) {
      n-=tmp;
      sum=tmp + bit;
    }
    bit>>=1;
    n<<=1;
  }
  return (int)(sum >> 16 - (FIXED_POINT / 2));
}
