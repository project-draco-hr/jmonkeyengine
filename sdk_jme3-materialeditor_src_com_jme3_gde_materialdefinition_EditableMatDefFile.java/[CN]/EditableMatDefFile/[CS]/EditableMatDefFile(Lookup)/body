{
  obj=lookup.lookup(MatDefDataObject.class);
  this.matDefFile=obj.getPrimaryFile();
  this.assetManager=lookup.lookup(ProjectAssetManager.class);
  this.glsl100=new Glsl100ShaderGenerator(assetManager);
  this.glsl150=new Glsl150ShaderGenerator(assetManager);
  this.lookup=lookup;
  materialDef=null;
  matDefStructure=null;
  FileLock lock=null;
  try {
    lock=matDefFile.lock();
    List<Statement> sta=BlockLanguageParser.parse(obj.getPrimaryFile().getInputStream());
    matDefStructure=new MatDefBlock(sta.get(0));
    materialDef=(MaterialDef)assetManager.loadAsset(assetManager.getRelativeAssetPath(matDefFile.getPath()));
    lock.releaseLock();
  }
 catch (  Exception ex) {
    Exceptions.printStackTrace(ex);
  }
 finally {
    if (lock != null) {
      lock.releaseLock();
    }
  }
  if (materialDef != null) {
    currentTechnique=matDefStructure.getTechniques().get(0);
    registerListener(matDefStructure);
    obj.getLookupContents().add(matDefStructure);
    updateLookupWithMaterialData(obj);
  }
}
