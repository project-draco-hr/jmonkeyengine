{
  if (button == 0) {
    CollisionResults results=new CollisionResults();
    Ray ray=new Ray();
    Vector3f pos=cam.getWorldCoordinates(new Vector2f(mouseX,mouseY),0).clone();
    Vector3f dir=cam.getWorldCoordinates(new Vector2f(mouseX,mouseY),0.3f).clone();
    dir.subtractLocal(pos).normalizeLocal();
    ray.setOrigin(pos);
    ray.setDirection(dir);
    rootNode.collideWith(ray,results);
    if (results == null) {
      return;
    }
    final CollisionResult result=results.getClosestCollision();
    java.awt.EventQueue.invokeLater(new Runnable(){
      public void run(){
        if (result != null && result.getGeometry() != null) {
          SceneApplication.getApplication().setSelectedNode(jmeRootNode.getChild(result.getGeometry()));
        }
 else {
          SceneApplication.getApplication().setSelectedNode(jmeRootNode);
        }
      }
    }
);
    checkClick=false;
  }
  if (button == 1) {
    CollisionResults results=new CollisionResults();
    Ray ray=new Ray();
    Vector3f pos=cam.getWorldCoordinates(new Vector2f(mouseX,mouseY),0).clone();
    Vector3f dir=cam.getWorldCoordinates(new Vector2f(mouseX,mouseY),0.3f).clone();
    dir.subtractLocal(pos).normalizeLocal();
    ray.setOrigin(pos);
    ray.setDirection(dir);
    rootNode.collideWith(ray,results);
    if (results == null) {
      return;
    }
    CollisionResult result=results.getClosestCollision();
    if (result != null) {
      ((SceneComposerTopComponent)master).doMoveCursor(result.getContactPoint());
    }
    checkClickR=false;
  }
}
