{
  initCrossHairs();
  initMaterial();
  cam.setLocation(new Vector3f(0.26924422f,6.646658f,22.265987f));
  cam.setRotation(new Quaternion(-2.302544E-4f,0.99302495f,-0.117888905f,-0.0019395084f));
  bulletAppState=new BulletAppState();
  bulletAppState.setEnabled(true);
  stateManager.attach(bulletAppState);
  PhysicsTestHelper.createPhysicsTestWorld(rootNode,assetManager,bulletAppState.getPhysicsSpace());
  setupLight();
  model=(Node)assetManager.loadModel("Models/Oto/Oto.mesh.xml");
  AnimControl control=model.getControl(AnimControl.class);
  SkeletonDebugger skeletonDebug=new SkeletonDebugger("skeleton",control.getSkeleton());
  Material mat2=new Material(assetManager,"Common/MatDefs/Misc/WireColor.j3md");
  mat2.setColor("Color",ColorRGBA.Green);
  mat2.getAdditionalRenderState().setDepthTest(false);
  skeletonDebug.setMaterial(mat2);
  skeletonDebug.setLocalTranslation(model.getLocalTranslation());
  ragdoll=new RagdollControl(1.0f);
  ragdoll.addCollisionListener(this);
  model.addControl(ragdoll);
  float eighth_pi=FastMath.PI * 0.125f;
  ragdoll.setJointLimit("head",eighth_pi,-eighth_pi,eighth_pi,-eighth_pi,eighth_pi,-eighth_pi);
  ragdoll.setJointLimit("spinehigh",FastMath.QUARTER_PI,-FastMath.QUARTER_PI,0,0,FastMath.QUARTER_PI,-FastMath.QUARTER_PI);
  ragdoll.setJointLimit("hip.right",FastMath.PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI);
  ragdoll.setJointLimit("hip.left",FastMath.PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI);
  ragdoll.setJointLimit("leg.left",0,-FastMath.PI,0,0,0,0);
  ragdoll.setJointLimit("leg.right",0,-FastMath.PI,0,0,0,0);
  ragdoll.setJointLimit("foot.right",0,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI);
  ragdoll.setJointLimit("foot.left",0,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI);
  ragdoll.setJointLimit("uparm.right",FastMath.HALF_PI,-FastMath.QUARTER_PI,0,0,FastMath.QUARTER_PI,-FastMath.HALF_PI);
  ragdoll.setJointLimit("uparm.left",FastMath.HALF_PI,-FastMath.QUARTER_PI,0,0,FastMath.QUARTER_PI,-FastMath.HALF_PI);
  ragdoll.setJointLimit("arm.right",FastMath.PI,0,0,0,0,0);
  ragdoll.setJointLimit("arm.left",FastMath.PI,0,0,0,0,0);
  ragdoll.setJointLimit("hand.right",FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI);
  ragdoll.setJointLimit("hand.left",FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI,FastMath.QUARTER_PI,-FastMath.QUARTER_PI);
  getPhysicsSpace().add(ragdoll);
  speed=1.3f;
  rootNode.attachChild(model);
  flyCam.setMoveSpeed(50);
  inputManager.addListener(new ActionListener(){
    public void onAction(    String name,    boolean isPressed,    float tpf){
      if (name.equals("toggle") && isPressed) {
        ragdoll.setControl(false);
      }
      if (name.equals("shoot") && isPressed) {
        timer=0;
      }
      if (name.equals("shoot") && !isPressed) {
        Geometry bulletg=new Geometry("bullet",bullet);
        bulletg.setMaterial(matBullet);
        bulletg.setLocalTranslation(cam.getLocation());
        bulletg.setLocalScale(timer);
        bulletCollisionShape=new SphereCollisionShape(timer);
        RigidBodyControl bulletNode=new RigidBodyControl(bulletCollisionShape,timer * 10);
        bulletNode.setCcdMotionThreshold(0.001f);
        bulletNode.setLinearVelocity(cam.getDirection().mult(80));
        bulletg.addControl(bulletNode);
        rootNode.attachChild(bulletg);
        getPhysicsSpace().add(bulletNode);
      }
    }
  }
,"toggle","shoot");
  inputManager.addMapping("toggle",new KeyTrigger(KeyInput.KEY_SPACE));
  inputManager.addMapping("shoot",new MouseButtonTrigger(MouseInput.BUTTON_LEFT));
}
