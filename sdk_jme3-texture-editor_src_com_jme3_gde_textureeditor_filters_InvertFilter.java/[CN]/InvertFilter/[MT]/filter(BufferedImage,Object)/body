{
  final Channel channel;
  if ((args == null) || (args.length < 1) || (!(args[0] instanceof Channel))) {
    channel=Channel.All;
  }
 else {
    channel=(Channel)args[0];
  }
  BufferedImage result=new BufferedImage(source.getWidth(),source.getHeight(),BufferedImage.TYPE_INT_ARGB);
  final int height=source.getHeight();
  final int width=source.getWidth();
  for (int y=0; y < height; y++) {
    for (int x=0; x < width; x++) {
      final int sourceARGB=source.getRGB(x,y);
      final int targetARGB=invert(sourceARGB,channel);
      result.setRGB(x,y,targetARGB);
    }
  }
  return result;
}
