{
  if (components < 1 || components > 4)   throw new IllegalArgumentException("components must be between 1 and 4");
  VertexBuffer vb=buffers.get(type.ordinal());
  if (vb == null) {
    if (buf == null)     return;
    vb=new VertexBuffer(type);
    vb.setupData(Usage.Dynamic,components,Format.Float,buf);
    buffers.put(type.ordinal(),vb);
  }
 else {
    vb.setupData(Usage.Dynamic,components,Format.Float,buf);
  }
  updateCounts();
}
