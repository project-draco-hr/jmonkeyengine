{
  if (getBuffer(Type.InterleavedData) != null)   throw new IllegalStateException("Should update counts before interleave");
  VertexBuffer pb=getBuffer(Type.Position);
  VertexBuffer ib=getBuffer(Type.Index);
  if (pb != null) {
    vertCount=pb.getData().capacity() / pb.getNumComponents();
  }
  if (ib != null) {
    elementCount=computeNumElements(ib.getData().capacity());
  }
 else {
    elementCount=computeNumElements(vertCount);
  }
}
