{
  if (playState == PlayState.Playing) {
    time=time + (tpf * speed);
    if (loopMode == loopMode.Loop && time < 0) {
      time=initialDuration;
    }
    if ((time >= initialDuration || time < 0) && loopMode == loopMode.DontLoop) {
      if (time >= initialDuration) {
        path.triggerWayPointReach(path.getNbWayPoints() - 1,this);
      }
      stop();
    }
 else {
      onUpdate(tpf);
    }
  }
}
