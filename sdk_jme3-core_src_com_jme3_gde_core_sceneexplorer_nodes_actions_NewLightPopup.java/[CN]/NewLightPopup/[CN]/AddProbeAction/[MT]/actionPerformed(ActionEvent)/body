{
  SceneApplication.getApplication().enqueue(new Callable<Void>(){
    @Override public Void call() throws Exception {
      EnvironmentCamera envCam=SceneApplication.getApplication().getStateManager().getState(EnvironmentCamera.class);
      SceneToolController toolController=SceneApplication.getApplication().getStateManager().getState(SceneToolController.class);
      if (toolController != null) {
        envCam.setPosition(toolController.getCursorLocation());
      }
 else {
        envCam.setPosition(new Vector3f(0,0,0));
      }
      LightProbe lightProbe=LightProbeFactory.makeProbe(envCam,node,new JobProgressAdapter<LightProbe>(){
        @Override public void done(        LightProbe t){
          System.err.println("Done computing env maps");
          ((BoundingSphere)t.getBounds()).setRadius(200);
        }
      }
);
      node.addLight(lightProbe);
      addLightUndo(node,lightProbe);
      setModified();
      return null;
    }
  }
);
}
