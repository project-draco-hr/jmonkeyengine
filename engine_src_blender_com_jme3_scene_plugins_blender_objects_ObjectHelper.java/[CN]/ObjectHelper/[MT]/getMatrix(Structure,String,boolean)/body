{
  Matrix4f result=new Matrix4f();
  DynamicArray<Number> obmat=(DynamicArray<Number>)structure.getFieldValue(matrixName);
  int rowAndColumnSize=Math.abs((int)Math.sqrt(obmat.getTotalSize()));
  for (int i=0; i < rowAndColumnSize; ++i) {
    for (int j=0; j < rowAndColumnSize; ++j) {
      result.set(i,j,obmat.get(j,i).floatValue());
    }
  }
  if (fixUpAxis) {
    Vector3f translation=result.toTranslationVector();
    Quaternion rotation=result.toRotationQuat();
    Vector3f scale=result.toScaleVector();
    float y=translation.y;
    translation.y=translation.z;
    translation.z=y == 0 ? 0 : -y;
    y=rotation.getY();
    float z=rotation.getZ();
    rotation.set(rotation.getX(),z,y == 0 ? 0 : -y,rotation.getW());
    y=scale.y;
    scale.y=scale.z;
    scale.z=y;
    result.loadIdentity();
    result.setTranslation(translation);
    result.setRotationQuaternion(rotation);
    result.setScale(scale);
  }
  for (int i=0; i < 4; ++i) {
    for (int j=0; j < 4; ++j) {
      float value=result.get(i,j);
      if (Math.abs(value) <= FastMath.FLT_EPSILON) {
        result.set(i,j,0);
      }
    }
  }
  return result;
}
