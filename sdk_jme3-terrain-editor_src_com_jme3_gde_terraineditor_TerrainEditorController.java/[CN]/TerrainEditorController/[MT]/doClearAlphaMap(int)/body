{
  Terrain terrain=(Terrain)getTerrain(null);
  if (terrain == null)   return;
  int alphaIdx=selectedTextureIndex / 4;
  int texIndex=selectedTextureIndex - ((selectedTextureIndex / 4) * 4);
  Texture tex=doGetAlphaTexture(terrain,alphaIdx);
  Image image=tex.getImage();
  PaintTerrainToolAction paint=new PaintTerrainToolAction();
  ColorRGBA color=ColorRGBA.Black;
  for (int y=0; y < image.getHeight(); y++) {
    for (int x=0; x < image.getWidth(); x++) {
      paint.manipulatePixel(image,x,y,color,false);
switch (texIndex) {
case 0:
        color.r=0;
      break;
case 1:
    color.g=0;
  break;
case 2:
color.b=0;
break;
case 3:
color.a=0;
break;
}
color.clamp();
paint.manipulatePixel(image,x,y,color,true);
}
}
image.getData(0).rewind();
tex.getImage().setUpdateNeeded();
setNeedsSave(true);
alphaLayersChanged();
}
