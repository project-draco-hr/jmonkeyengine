{
  terrainNode=null;
  Terrain terrain=(Terrain)getTerrain(rootNode);
  AssetManager manager=SceneApplication.getApplication().getAssetManager();
  String assetFolder=null;
  if (manager != null && manager instanceof ProjectAssetManager)   assetFolder=((ProjectAssetManager)manager).getAssetFolderName();
  if (assetFolder == null)   throw new IllegalStateException("AssetManager was not a ProjectAssetManager. Could not locate image save directories.");
  Texture alpha1=doGetAlphaTexture(terrain,0);
  BufferedImage bi1=ImageToAwt.convert(alpha1.getImage(),false,true,0);
  File imageFile1=new File(assetFolder + "/" + alpha1.getKey().getName());
  Texture alpha2=doGetAlphaTexture(terrain,1);
  BufferedImage bi2=ImageToAwt.convert(alpha2.getImage(),false,true,0);
  File imageFile2=new File(assetFolder + "/" + alpha2.getKey().getName());
  Texture alpha3=doGetAlphaTexture(terrain,2);
  BufferedImage bi3=ImageToAwt.convert(alpha3.getImage(),false,true,0);
  File imageFile3=new File(assetFolder + "/" + alpha3.getKey().getName());
  ImageOutputStream ios1=null;
  ImageOutputStream ios2=null;
  ImageOutputStream ios3=null;
  try {
    ios1=new FileImageOutputStream(imageFile1);
    ios2=new FileImageOutputStream(imageFile2);
    ios3=new FileImageOutputStream(imageFile3);
    ImageIO.write(bi1,"png",ios1);
    ImageIO.write(bi2,"png",imageFile2);
    ImageIO.write(bi3,"png",imageFile3);
  }
 catch (  IOException ex) {
    System.out.println("Failed saving alphamaps");
    System.out.println("    " + imageFile1);
    System.out.println("    " + imageFile2);
    System.out.println("    " + imageFile3);
    Exceptions.printStackTrace(ex);
  }
 finally {
    try {
      if (ios1 != null)       ios1.close();
    }
 catch (    IOException ex) {
      Exceptions.printStackTrace(ex);
    }
    try {
      if (ios2 != null)       ios2.close();
    }
 catch (    IOException ex) {
      Exceptions.printStackTrace(ex);
    }
    try {
      if (ios3 != null)       ios3.close();
    }
 catch (    IOException ex) {
      Exceptions.printStackTrace(ex);
    }
  }
}
