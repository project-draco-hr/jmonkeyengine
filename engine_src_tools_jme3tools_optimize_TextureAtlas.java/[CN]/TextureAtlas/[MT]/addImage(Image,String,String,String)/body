{
  if (rootMapName == null) {
    rootMapName=mapName;
  }
  if (sourceTextureName == null && !rootMapName.equals(mapName)) {
    throw new IllegalStateException("Cannot add texture to new map without source texture");
  }
  TextureAtlasTile location=locationMap.get(name);
  if (location != null) {
    locationMap.put(name,location);
    return true;
  }
 else   if (sourceTextureName == null) {
    Node node=root.insert(image);
    if (node == null) {
      return false;
    }
    location=node.location;
  }
 else {
    location=locationMap.get(sourceTextureName);
    if (location == null) {
      throw new IllegalStateException("Cannot find location for source texture");
    }
  }
  locationMap.put(name,location);
  drawImage(image,location.getX(),location.getY(),mapName);
  return true;
}
