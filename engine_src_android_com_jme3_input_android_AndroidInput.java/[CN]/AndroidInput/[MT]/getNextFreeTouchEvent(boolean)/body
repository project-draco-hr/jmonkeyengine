{
  TouchEvent evt=null;
synchronized (eventPoolUnConsumed) {
    int size=eventPoolUnConsumed.size();
    while (size > 0) {
      evt=eventPoolUnConsumed.pop();
      if (!evt.isConsumed()) {
        eventPoolUnConsumed.push(evt);
        evt=null;
      }
 else {
        break;
      }
      size--;
    }
  }
  if (evt == null) {
    if (eventPool.isEmpty() && wait) {
      logger.warning("eventPool buffer underrun");
      boolean isEmpty;
      do {
synchronized (eventPool) {
          isEmpty=eventPool.isEmpty();
        }
        try {
          Thread.sleep(50);
        }
 catch (        InterruptedException e) {
        }
      }
 while (isEmpty);
synchronized (eventPool) {
        evt=eventPool.pop();
      }
    }
 else     if (eventPool.isEmpty()) {
      evt=new TouchEvent();
      logger.warning("eventPool buffer underrun");
    }
 else {
synchronized (eventPool) {
        evt=eventPool.pop();
      }
    }
  }
  return evt;
}
