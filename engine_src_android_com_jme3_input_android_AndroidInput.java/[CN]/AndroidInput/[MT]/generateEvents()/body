{
  if (listener != null) {
    TouchEvent event;
    MouseButtonEvent btn;
    int newX;
    int newY;
    while (!eventQueue.isEmpty()) {
synchronized (eventQueue) {
        event=eventQueue.pop();
      }
      if (event != null) {
        listener.onTouchEvent(event);
        if (mouseEventsEnabled) {
          if (mouseEventsInvertX)           newX=this.getWidth() - (int)event.getX();
 else           newX=(int)event.getX();
          if (mouseEventsInvertY)           newY=this.getHeight() - (int)event.getY();
 else           newY=(int)event.getY();
switch (event.getType()) {
case DOWN:
            btn=new MouseButtonEvent(0,true,newX,newY);
          btn.setTime(event.getTime());
        listener.onMouseButtonEvent(btn);
      lastX=-1;
    lastY=-1;
  break;
case UP:
btn=new MouseButtonEvent(0,false,newX,newY);
btn.setTime(event.getTime());
listener.onMouseButtonEvent(btn);
lastX=-1;
lastY=-1;
break;
case MOVE:
int dx;
int dy;
if (lastX != -1) {
dx=newX - lastX;
dy=newY - lastY;
}
 else {
dx=0;
dy=0;
}
MouseMotionEvent mot=new MouseMotionEvent(newX,newY,dx,dy,0,0);
mot.setTime(event.getTime());
listener.onMouseMotionEvent(mot);
lastX=newX;
lastY=newY;
break;
}
}
}
if (event.isConsumed() == false) {
synchronized (eventPoolUnConsumed) {
eventPoolUnConsumed.push(event);
}
}
 else {
synchronized (eventPool) {
eventPool.push(event);
}
}
}
}
}
