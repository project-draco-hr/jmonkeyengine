{
  if (needDestroyCanvas.getAndSet(false)) {
    logger.log(Level.INFO,"OGL: Received destroy request! Complying..");
    try {
      listener.loseFocus();
      pauseCanvas();
    }
  finally {
      try {
        actionRequiredBarrier.await();
      }
 catch (      InterruptedException ex) {
        logger.log(Level.SEVERE,"OGL: Interrupted! ",ex);
      }
catch (      BrokenBarrierException ex) {
        logger.log(Level.SEVERE,"OGL: Broken barrier! ",ex);
      }
    }
  }
 else   if (needRestoreCanvas.getAndSet(false)) {
    logger.log(Level.INFO,"OGL: Canvas is now visible! Re-initializing..");
    restoreCanvas();
    listener.gainFocus();
  }
  if (width != canvas.getWidth() || height != canvas.getHeight()) {
    width=canvas.getWidth();
    height=canvas.getHeight();
    if (listener != null)     listener.reshape(width,height);
  }
  super.runLoop();
}
