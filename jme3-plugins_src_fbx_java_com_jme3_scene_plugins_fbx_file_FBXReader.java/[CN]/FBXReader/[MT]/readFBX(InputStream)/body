{
  FBXFile fbxFile=new FBXFile();
  ByteBuffer byteBuffer=readToByteBuffer(stream);
  try {
    stream.close();
  }
 catch (  IOException e) {
  }
  byte[] majic=getBytes(byteBuffer,HEAD_MAGIC.length);
  if (!Arrays.equals(HEAD_MAGIC,majic))   throw new IOException("Not FBX file");
  fbxFile.version=getUInt(byteBuffer);
  while (true) {
    FBXElement e=readFBXElement(byteBuffer);
    if (e == null)     break;
    fbxFile.rootElements.add(e);
  }
  return fbxFile;
}
