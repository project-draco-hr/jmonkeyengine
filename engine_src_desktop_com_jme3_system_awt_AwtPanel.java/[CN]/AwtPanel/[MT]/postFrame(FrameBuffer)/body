{
  if (out != fb) {
    throw new IllegalStateException("Why did you change the output framebuffer?");
  }
  if (reshapeNeeded.getAndSet(false)) {
    reshapeInThread(newWidth,newHeight);
  }
 else   if (activeUpdates) {
    byteBuf.clear();
    rm.getRenderer().readFrameBuffer(fb,byteBuf);
    Screenshots.convertScreenShot2(intBuf,img);
    drawFrameInThread();
  }
}
