{
  IncludeExclude set=new IncludeExclude();
  BufferedReader buf=new BufferedReader(r);
  for (; ; ) {
    String line=buf.readLine();
    if (line == null)     break;
    line=line.trim();
    if (line.length() == 0 || line.startsWith("#")) {
      continue;
    }
    Boolean plus;
    if (line.startsWith("include ")) {
      line=line.substring(8);
      plus=Boolean.TRUE;
    }
 else {
      if (line.startsWith("exclude ")) {
        line=line.substring(8);
        plus=Boolean.FALSE;
      }
 else {
        throw new java.io.IOException("Wrong line: " + line);
      }
    }
    Pattern p=Pattern.compile(line);
    set.patterns.add(Union2.<Boolean,Pattern>createFirst(plus));
    set.patterns.add(Union2.<Boolean,Pattern>createSecond(p));
  }
  return set;
}
