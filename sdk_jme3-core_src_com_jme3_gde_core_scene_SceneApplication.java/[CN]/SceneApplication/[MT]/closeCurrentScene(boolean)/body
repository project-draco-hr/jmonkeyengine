{
  if (currentSceneRequest != null) {
    if (!notifySceneListeners(currentSceneRequest)) {
      if (!force) {
        return false;
      }
    }
    checkSave();
    if (physicsState != null) {
      physicsState.getPhysicsSpace().removeAll(rootNode);
      getStateManager().detach(physicsState);
      physicsState=null;
    }
    currentSceneRequest.setDisplayed(false);
  }
  toolsNode.detachAllChildren();
  rootNode.detachAllChildren();
  setHelpContext(null);
  currentSceneRequest=null;
  lastError="";
  java.awt.EventQueue.invokeLater(new Runnable(){
    public void run(){
      SceneUndoRedoManager manager=Lookup.getDefault().lookup(SceneUndoRedoManager.class);
      if (manager != null) {
        manager.discardAllEdits();
      }
    }
  }
);
  return true;
}
