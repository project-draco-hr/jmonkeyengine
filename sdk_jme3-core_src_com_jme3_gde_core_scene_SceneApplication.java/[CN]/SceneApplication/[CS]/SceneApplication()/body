{
  Logger.getLogger("com.jme3").addHandler(logHandler);
  useCanvas="true".equals(NbPreferences.forModule(Installer.class).get("use_lwjgl_canvas","false"));
  Logger.getLogger("com.jme3.renderer.opengl.TextureUtil").setLevel(Level.SEVERE);
  try {
    AppSettings newSetting=new AppSettings(true);
    newSetting.setFrameRate(30);
    newSetting.setGammaCorrection(true);
    if (!useCanvas) {
      newSetting.setCustomRenderer(AwtPanelsContext.class);
    }
    setSettings(newSetting);
    setPauseOnLostFocus(false);
    if (useCanvas) {
      createCanvas();
      startCanvas(true);
    }
    fakeApp=new FakeApplication(rootNode,guiNode,assetManager,cam);
    nodeSync=new NodeSyncAppState();
    stateManager.attach(nodeSync);
    if (!useCanvas) {
      start();
    }
  }
 catch (  Exception e) {
    showStartupErrorMessage(e);
  }
catch (  Error e) {
    showStartupErrorMessage(e);
  }
 finally {
  }
}
