{
  propsMutex.writeAccess(new Runnable(){
    public void run(){
      OutputStream out=null;
      FileLock lock=null;
      try {
        FileObject pFile=file.getPrimaryFile();
        FileObject storageFolder=getFolder();
        if (storageFolder == null) {
          return;
        }
        FileObject myFile=storageFolder.getFileObject(getFileFullName(pFile));
        if (myFile == null) {
          return;
        }
        lock=myFile.lock();
        myFile.delete(lock);
      }
 catch (      IOException e) {
        Exceptions.printStackTrace(e);
      }
 finally {
        if (out != null) {
          try {
            out.close();
          }
 catch (          IOException ex) {
            Exceptions.printStackTrace(ex);
          }
        }
        if (lock != null) {
          lock.releaseLock();
        }
      }
    }
  }
);
}
