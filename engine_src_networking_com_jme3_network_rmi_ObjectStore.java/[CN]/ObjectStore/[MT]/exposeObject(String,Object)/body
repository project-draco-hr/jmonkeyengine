{
  LocalObject localObj=new LocalObject();
  localObj.objectName=name;
  localObj.objectId=objectIdCounter++;
  localObj.theObject=obj;
  localObj.methods=obj.getClass().getMethods();
  localObjects.put(localObj.objectId,localObj);
  RemoteObjectDefMessage defMsg=new RemoteObjectDefMessage();
  defMsg.objects=new ObjectDef[]{makeObjectDef(localObj)};
  if (client != null) {
    client.send(defMsg);
    logger.log(Level.INFO,"Client: Sending {0}",defMsg);
  }
 else {
    server.broadcast(defMsg);
    logger.log(Level.INFO,"Server: Sending {0}",defMsg);
  }
}
