{
  MessageProtocol protocol=new MessageProtocol();
  while (go.get()) {
    ByteBuffer buffer=connector.read();
    protocol.addBuffer(buffer);
    Message m=null;
    while ((m=protocol.getMessage()) != null) {
      dispatch(m);
    }
  }
}
