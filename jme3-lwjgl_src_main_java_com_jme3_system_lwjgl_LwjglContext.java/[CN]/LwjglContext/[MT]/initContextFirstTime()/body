{
  if (!GLContext.getCapabilities().OpenGL20) {
    throw new RendererException("OpenGL 2.0 or higher is " + "required for jMonkeyEngine");
  }
  if (settings.getRenderer().equals(AppSettings.LWJGL_OPENGL2) || settings.getRenderer().equals(AppSettings.LWJGL_OPENGL3)) {
    GL gl=new LwjglGL();
    GLFbo glfbo=new LwjglGLExt();
    if (settings.getBoolean("GraphicsDebug")) {
      gl=new GLDebugDesktop(gl,glfbo);
      glfbo=(GLFbo)gl;
    }
    if (settings.getBoolean("GraphicsTrace")) {
      gl=(GL)GLTracer.createDesktopGlTracer(gl,GL.class,GL2.class,GL3.class);
      glfbo=(GLFbo)GLTracer.createDesktopGlTracer(glfbo,GLExt.class);
    }
    renderer=new GLRenderer(gl,glfbo);
    renderer.initialize();
  }
 else {
    throw new UnsupportedOperationException("Unsupported renderer: " + settings.getRenderer());
  }
  if (GLContext.getCapabilities().GL_ARB_debug_output && settings.getBoolean("GraphicsDebug")) {
    ARBDebugOutput.glDebugMessageCallbackARB(new ARBDebugOutputCallback());
  }
  renderer.setMainFrameBufferSrgb(settings.getGammaCorrection());
  renderer.setLinearizeSrgbImages(settings.getGammaCorrection());
  if (keyInput != null) {
    keyInput.initialize();
  }
  if (mouseInput != null) {
    mouseInput.initialize();
  }
  if (joyInput != null) {
    joyInput.initialize();
  }
}
