{
  logger.info("Initialize OpenCL wiht LWJGL2");
  try {
    CL.create();
  }
 catch (  LWJGLException ex) {
    logger.log(Level.SEVERE,"Unable to initialize OpenCL",ex);
    return;
  }
  List<CLPlatform> platforms=CLPlatform.getPlatforms();
  StringBuilder platformInfos=new StringBuilder();
  platformInfos.append("Available OpenCL platforms:\n");
  ArrayList<Integer> possiblePlatforms=new ArrayList<Integer>();
  for (int i=0; i < platforms.size(); ++i) {
    CLPlatform platform=platforms.get(i);
    platformInfos.append(" * Platform ").append(i + 1).append("\n");
    platformInfos.append(" *   Name: ").append(platform.getInfoString(CL10.CL_PLATFORM_NAME)).append("\n");
    platformInfos.append(" *   Vendor: ").append(platform.getInfoString(CL10.CL_PLATFORM_VENDOR)).append("\n");
    platformInfos.append(" *   Version: ").append(platform.getInfoString(CL10.CL_PLATFORM_VERSION)).append("\n");
    platformInfos.append(" *   Profile: ").append(platform.getInfoString(CL10.CL_PLATFORM_PROFILE)).append("\n");
    boolean supportsInterop=platform.getInfoString(CL10.CL_PLATFORM_EXTENSIONS).contains("cl_khr_gl_sharing");
    platformInfos.append(" *   Supports Interop: ").append(supportsInterop).append("\n");
    if (supportsInterop) {
      possiblePlatforms.add(i);
    }
  }
  logger.info(platformInfos.toString().trim());
  if (possiblePlatforms.isEmpty()) {
    logger.warning("No OpenCL platform with the extension 'cl_khr_gl_sharing' found!");
    return;
  }
  int platformIndex=possiblePlatforms.get(0);
  logger.info("Choose platform with index " + (platformIndex + 1));
  clPlatform=platforms.get(platformIndex);
  List<CLDevice> devices=clPlatform.getDevices(CL10.CL_DEVICE_TYPE_GPU);
  StringBuilder deviceInfos=new StringBuilder();
  deviceInfos.append("Available OpenCL devices:\n");
  ArrayList<CLDevice> possibleDevices=new ArrayList<CLDevice>();
  for (int i=0; i < devices.size(); ++i) {
    CLDevice device=devices.get(i);
    deviceInfos.append(" * Device ").append(i + 1).append("\n");
    deviceInfos.append(" *   Name: ").append(device.getInfoString(CL10.CL_DEVICE_NAME)).append("\n");
    deviceInfos.append(" *   Vendor: ").append(device.getInfoString(CL10.CL_DEVICE_VENDOR)).append("\n");
    deviceInfos.append(" *   Version: ").append(device.getInfoString(CL10.CL_DEVICE_VERSION)).append("\n");
    deviceInfos.append(" *   Profile: ").append(device.getInfoString(CL10.CL_DEVICE_PROFILE)).append("\n");
    deviceInfos.append(" *   Global memory: ").append(device.getInfoLong(CL10.CL_DEVICE_GLOBAL_MEM_SIZE)).append("\n");
    deviceInfos.append(" *   Compute units: ").append(device.getInfoInt(CL10.CL_DEVICE_MAX_COMPUTE_UNITS)).append("\n");
    deviceInfos.append(" *   Work group size: ").append(device.getInfoSize(CL10.CL_DEVICE_MAX_WORK_GROUP_SIZE)).append("\n");
    boolean supportsInterop=device.getInfoString(CL10.CL_DEVICE_EXTENSIONS).contains("cl_khr_gl_sharing");
    platformInfos.append(" *   Supports Interop: ").append(supportsInterop).append("\n");
    if (supportsInterop) {
      possibleDevices.add(device);
    }
  }
  CLContext context;
  try {
    context=CLContext.create(clPlatform,possibleDevices,null,Display.getDrawable(),null);
  }
 catch (  LWJGLException ex) {
    logger.log(Level.SEVERE,"Unable to create OpenCL context",ex);
    return;
  }
  clContext=new Context(context.getPointer());
  clImpl=new LwjglCL();
  clContext.setCl(clImpl);
  logger.info("OpenCL context created");
}
