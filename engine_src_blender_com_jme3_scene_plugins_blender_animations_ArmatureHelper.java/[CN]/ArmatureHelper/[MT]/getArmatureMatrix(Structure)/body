{
  DynamicArray<Number> boneMat=(DynamicArray<Number>)boneStructure.getFieldValue("arm_mat");
  Matrix4f m=new Matrix4f();
  for (int i=0; i < 4; ++i) {
    for (int j=0; j < 4; ++j) {
      m.set(i,j,boneMat.get(j,i).floatValue());
    }
  }
  if (fixUpAxis) {
    Vector3f translation=m.toTranslationVector();
    Quaternion rotation=m.toRotationQuat();
    float y=translation.y;
    translation.y=translation.z;
    translation.z=-y;
    rotation=upAxisRotationQuaternion.mult(rotation);
    m.setRotationQuaternion(rotation);
    m.setTranslation(translation);
  }
  return m;
}
