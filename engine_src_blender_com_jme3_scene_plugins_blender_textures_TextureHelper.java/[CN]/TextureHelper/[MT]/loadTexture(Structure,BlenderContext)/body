{
  LOGGER.log(Level.FINE,"Fetching texture with OMA = {0}",imageStructure.getOldMemoryAddress());
  Texture result=null;
  Image im=(Image)blenderContext.getLoadedFeature(imageStructure.getOldMemoryAddress(),LoadedFeatureDataType.LOADED_FEATURE);
  if (im == null) {
    String texturePath=imageStructure.getFieldValue("name").toString();
    Pointer pPackedFile=(Pointer)imageStructure.getFieldValue("packedfile");
    if (pPackedFile.isNull()) {
      LOGGER.log(Level.FINE,"Reading texture from file: {0}",texturePath);
      result=this.loadImageFromFile(texturePath,blenderContext);
    }
 else {
      LOGGER.fine("Packed texture. Reading directly from the blend file!");
      Structure packedFile=pPackedFile.fetchData(blenderContext.getInputStream()).get(0);
      Pointer pData=(Pointer)packedFile.getFieldValue("data");
      FileBlockHeader dataFileBlock=blenderContext.getFileBlock(pData.getOldMemoryAddress());
      blenderContext.getInputStream().setPosition(dataFileBlock.getBlockPosition());
      ImageLoader imageLoader=new ImageLoader();
      result=new Texture2D(imageLoader.loadImage(blenderContext.getInputStream(),dataFileBlock.getBlockPosition(),true));
    }
  }
 else {
    result=new Texture2D(im);
  }
  return result;
}
