{
  int r=0;
  while (n >= MIN_SIZE) {
    r|=(n & 1);
    n>>=1;
  }
  return n + r;
}
