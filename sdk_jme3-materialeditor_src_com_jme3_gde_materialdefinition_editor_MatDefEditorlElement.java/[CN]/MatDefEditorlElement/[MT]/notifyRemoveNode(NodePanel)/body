{
  MatDefBlock matDef=obj.getLookup().lookup(MatDefBlock.class);
  if (node.getType() == NodePanel.NodeType.Fragment || node.getType() == NodePanel.NodeType.Vertex) {
    TechniqueBlock technique=getTechnique(matDef);
    for (    ShaderNodeBlock shaderNodeBlock : technique.getShaderNodes()) {
      if (shaderNodeBlock.getName().equals(node.getName())) {
        technique.removeShaderNode(shaderNodeBlock);
      }
    }
  }
 else   if (node.getType() == NodePanel.NodeType.MatParam) {
    matDef.removeMatParam(new MatParamBlock("",node.getKey().replaceAll("MatParam.",""),"",""));
  }
 else   if (node.getType() == NodePanel.NodeType.WorldParam) {
    getTechnique(matDef).removeWorldParam(new WorldParamBlock(node.getKey().replaceAll("WorldParam.","")));
  }
 else   if (node.getType() == NodePanel.NodeType.Attribute) {
    getTechnique(matDef).cleanupMappings("Attr",node.getKey().replaceAll("Attr.",""));
  }
}
