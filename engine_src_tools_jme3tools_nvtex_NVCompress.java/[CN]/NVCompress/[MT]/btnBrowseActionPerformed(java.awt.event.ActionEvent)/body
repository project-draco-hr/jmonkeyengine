{
  JFileChooser chooser=new JFileChooser();
  chooser.setDialogTitle("Select export directory");
  chooser.setMultiSelectionEnabled(false);
  chooser.setDialogType(JFileChooser.OPEN_DIALOG);
  chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
  if (txtTargetDir.getText() != null && !txtTargetDir.getText().equals(""))   chooser.setSelectedFile(new File(txtTargetDir.getText()));
  if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
    File f=chooser.getSelectedFile();
    if (f != null && f.exists() && f.isDirectory())     txtTargetDir.setText(f.toString());
 else     JOptionPane.showMessageDialog(this,"Invalid export directory specified","Error",JOptionPane.ERROR_MESSAGE);
  }
}
